(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BWKn:function(t,a,r){var e=r("Ftjb");"string"==typeof e&&(e=[[t.i,e,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(e,n);e.locals&&(t.exports=e.locals)},CuGy:function(t,a,r){"use strict";r("BWKn")},Ftjb:function(t,a,r){(t.exports=r("I1BE")(!1)).push([t.i,".chart-block[data-v-87d70534]{border:1px solid #ccc;padding:20px;max-width:800px;margin:auto}",""])},cyjJ:function(t,a,r){"use strict";r.r(a);var e=r("o0o1"),n=r.n(e),o=r("H8ri"),s=o.b.reactiveProp,c={extends:o.a,mixins:[s],props:["options"],mounted:function(){this.renderChart(this.chartData,{responsive:!0,maintainAspectRatio:!1})}},i=r("wd/R"),l=r.n(i),d=r("BWV3"),u=r("vDqi"),h=r.n(u);function f(t,a,r,e,n,o,s){try{var c=t[o](s),i=c.value}catch(t){return void r(t)}c.done?a(i):Promise.resolve(i).then(e,n)}function b(t){return function(){var a=this,r=arguments;return new Promise((function(e,n){var o=t.apply(a,r);function s(t){f(o,e,n,s,c,"next",t)}function c(t){f(o,e,n,s,c,"throw",t)}s(void 0)}))}}function m(t){return v.apply(this,arguments)}function v(){return(v=b(n.a.mark((function t(a){var r,e,o,s,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.dateStart,e=a.dateEnd,o="start_date=".concat(r,"&end_date=").concat(e),t.next=4,h.a.get("/api/stats?".concat(o));case 4:return s=t.sent,c=s.data,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,a){if(!t)return;if("string"==typeof t)return g(t,a);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,a)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,a){(null==a||a>t.length)&&(a=t.length);for(var r=0,e=new Array(a);r<a;r++)e[r]=t[r];return e}function C(t,a,r,e,n,o,s){try{var c=t[o](s),i=c.value}catch(t){return void r(t)}c.done?a(i):Promise.resolve(i).then(e,n)}var y={components:{BarChart:c},mounted:function(){this.months=this.parseMonths()},data:function(){return{dataCollection:null,dateStart:null,dateEnd:null,monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],months:[{name:"Текущий месяц"},{name:"Сентябрь, 2019"},{name:"Август, 2019"},{name:"Июль, 2019"},{name:"Июнь, 2019"},{name:"Май, 2019"},{name:"Апрель, 2019"}]}},methods:{getData:function(){var t,a=this;return(t=n.a.mark((function t(){var r,e,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.dateStart&&a.dateEnd){t.next=3;break}return Object(d.a)("Выберите дату","","warning"),t.abrupt("return");case 3:if(r=l()(a.dateStart).format("YYYY-MM-DD"),e=l()(a.dateEnd).endOf("month").format("YYYY-MM-DD"),!(l()(e).diff(r)<1)){t.next=8;break}return Object(d.a)("Некорректный промежуток дат","","warning"),t.abrupt("return");case 8:return t.next=10,m({dateStart:r,dateEnd:e});case 10:o=t.sent,a.dataCollection={checkoutCash:{labels:p(o.checkoutCash.map((function(t){return t.key}))),datasets:[{label:"Пополнений в кассе",data:p(o.checkoutCash.map((function(t){return t.sum}))),backgroundColor:Array(o.checkoutCash.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(o.checkoutCash.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},debts:{labels:p(o.debts.map((function(t){return t.key}))),datasets:[{label:"Денег в минусе",data:p(o.debts.map((function(t){return t.debt}))),backgroundColor:Array(o.debts.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(o.debts.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},increases:{labels:p(o.increases.map((function(t){return t.key}))),datasets:[{label:"Прирост абонентской платы",data:p(o.increases.map((function(t){return t.sum}))),backgroundColor:Array(o.increases.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(o.increases.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]},decreases:{labels:p(o.decreases.map((function(t){return t.key}))),datasets:[{label:"Потери абонентской платы",data:p(o.decreases.map((function(t){return t.sum}))),backgroundColor:Array(o.decreases.length).fill("rgba(54, 162, 235, 0.2)"),borderColor:Array(o.decreases.length).fill("rgba(54, 162, 235, 1)"),borderWidth:1}]}};case 12:case"end":return t.stop()}}),t)})),function(){var a=this,r=arguments;return new Promise((function(e,n){var o=t.apply(a,r);function s(t){C(o,e,n,s,c,"next",t)}function c(t){C(o,e,n,s,c,"throw",t)}s(void 0)}))})()},parseMonths:function(){for(var t=this,a=l()(),r=l()().subtract(11,"months").clone(),e=[];a>r||r.format("M")===a.format("M");)e.push(r.format("YYYY-MM")),r.add(1,"month");return e.map((function(a){var r=a.split("-"),e=r[0],n=t.monthNames[parseInt(r[1])-1];return{name:"".concat(n,", ").concat(e," г."),value:a+"-01"}})).reverse()},fillData:function(){this.dataCollection={labels:["Июль, 2019","Август, 2019","Сентябрь, 2019","Октябрь, 2019"],datasets:[{label:"Экономические показатели",data:[this.getRandomInt(),this.getRandomInt(),this.getRandomInt(),this.getRandomInt()],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}},getRandomInt:function(){return Math.floor(46*Math.random())+5}}},k=(r("CuGy"),r("KHd+")),x=Object(k.a)(y,(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",[r("v-card",[r("v-card-title",[t._v("\n            Экономическая статистика\n        ")]),t._v(" "),r("v-card-text",[r("div",{staticClass:"d-flex"},[r("v-select",{staticClass:"mr-5",attrs:{label:"Начало",items:t.months,"item-value":"value","item-text":"name"},model:{value:t.dateStart,callback:function(a){t.dateStart=a},expression:"dateStart"}}),t._v(" "),r("v-select",{staticClass:"ml-5",attrs:{label:"Конец",items:t.months,"item-value":"value","item-text":"name"},model:{value:t.dateEnd,callback:function(a){t.dateEnd=a},expression:"dateEnd"}})],1),t._v(" "),r("v-btn",{attrs:{color:"primary",block:""},on:{click:t.getData}},[t._v("Отобразить статистику")])],1),t._v(" "),t.dataCollection?r("div",[r("div",{staticClass:"chart-block"},[r("h2",{staticClass:"text-center"},[t._v("Пополнений в кассе")]),t._v(" "),r("BarChart",{attrs:{"chart-data":t.dataCollection.checkoutCash}})],1),t._v(" "),r("div",{staticClass:"chart-block"},[r("h2",{staticClass:"text-center"},[t._v("Денег в минусе")]),t._v(" "),r("BarChart",{attrs:{"chart-data":t.dataCollection.debts}})],1),t._v(" "),r("div",{staticClass:"chart-block"},[r("h2",{staticClass:"text-center"},[t._v("Прирост абонентской платы")]),t._v(" "),r("BarChart",{attrs:{"chart-data":t.dataCollection.increases}})],1),t._v(" "),r("div",{staticClass:"chart-block"},[r("h2",{staticClass:"text-center"},[t._v("Потери по абонентской плате")]),t._v(" "),r("BarChart",{attrs:{"chart-data":t.dataCollection.decreases}})],1)]):t._e()],1)],1)}),[],!1,null,"87d70534",null);a.default=x.exports}}]);